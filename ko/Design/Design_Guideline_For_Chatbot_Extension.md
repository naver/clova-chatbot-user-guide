# Clova Chatbot 디자인 가이드라인

Clova Chatbot은 Clova를 통해 사용자에게 고객 지원 도움말이나 간단한 대화 서비스를 제공할 수 있습니다. 사용자에게 편리하고 유용한 서비스를 제공하기 위해 Clova Chatbot을 설계할 때 따르기를 권장하는 가이드라인을 간단한 예와 함께 설명합니다. 이 글에서 설명하는 내용은 Clova Chatbot 설계의 기본 권장 사항입니다.

* [챗봇 질문 정의](#DefineInteractionModel)
* [유의 사항](#Precautions)
* [지속적인 업데이트](#ContinuousUpdate)

## 챗봇 질문 정의 {#DefineInteractionModel}

Clova Chatbot의 Interaction 모델은 일반적인 Extension의 Interaction 모델과 달리 사용자의 질문에 고정된 응답을 제공하는 패턴을 가집니다. Clova Chatbot에서 Interaction 모델인 챗봇 질문을 정의하는 것은 사용자 질문 유형을 정의하고 발화 유형에 따라 발화 예시와 그에 상응하는 답변을 정의하는 것입니다.

Clova Chatbot의 챗봇 질문을 정의할 때는 다음과 같은 내용을 정의해야 합니다.

* [사용자 질문 유형](#TypeOfUserUtterance)
* [질문 예시](#UtteranceExamples)
* [질문 유형별 답변](#ResponsesForEachUtteranceType)
* [사전 타입](#VariableDictionary)

### 사용자 질문 유형 {#DefineTypeOfUserUtterance}

Clova Chatbot의 챗봇 질문을 정의할 때 가장 먼저 할 일은 Clova Chatbot이 대응해야 할 사용자 질문의 유형을 정의하는 것입니다.

사용자의 질문 유형은 같은 유형의 [질문 예시](#UtteranceExamples)에 어떤 [답변](#ResponsesForEachUtteranceType)을 할 것인지 나누는 논리적 단위가 됩니다. 즉, 질문 유형마다 사용자에게 제공할 답변을 정의해야 하기 때문에 같은 답변이 가능한 질문을 묶어서 하나의 유형으로 정의해야 합니다.

예를 들어 회원제로 운영하는 쇼핑몰 서비스의 고객 문의에 대응하는 Clova Chatbot을 만든다고 가정할 수 있습니다. 이런 종류의 서비스는 질문 유형을 통해 정보를 제공하는 목적으로 사용자와 대화하게 됩니다. 다음과 같은 사용자의 문의 유형이 있다고 정의하거나 예측할 수 있습니다.

```sh
* 회원 관련 문의
  * 가입 문의
  * 계정 찾기 문의
  * 회원 정보 변경 문의
  * 탈퇴 문의
* 결제 문의
  * 상품 구입 방법
  * 쿠폰 사용/적립금 사용 방법
  * 주문 정보 확인 방법
  * 상품 환불 방법
* 배송 문의
  * 배송 조회 방법
  * 배송지 변경 방법
  * 반품 방법
...
```

또는 말벗 서비스와 같이 간단한 대화 서비스를 제공할 수도 있는데, 이때는 주로 친교나 정서 표현의 목적으로 사용자와 대화하게 됩니다. 다음과 같이 질문 유형을 정의해 볼 수 있습니다.

```sh
* 인사
  * 시작/안부 인사
  * 작별 인사
* 소개
  * 사용자 본인 소개
  * 챗봇 소개 요청
    * 챗봇 이름 요청
    * 챗봇 성별 요청
    * 챗봇 나이 요청
    * 챗봇 거주지 요청
  * 챗봇 이용 방법 요청
* 정서적인 표현
  * 사용자가 기쁨을 표출하는 유형
  * 사용자가 분노를 표출하는 유형
  * 사용자가 호감을 표출하는 유형
  * 사용자가 슬픔을 표출하는 유형
...
```

### 질문 예시 {#UtteranceExamples}

Clova Chatbot이 대응할 [사용자의 질문 유형](#DefineTypeOfUserUtterance)을 정의했다면 각 유형별로 어떤 사용자 요청이 들어올지 질문 예시를 작성합니다. 하나의 질문 유형에는 '같은 답변을 가질 수 있는 모든 질문 예시'를 작성하면 됩니다.

질문 예시를 작성할 때는 다음을 고려해 작성할 것을 권장합니다.

* 문어체보다는 구어체로 작성합니다.
* 같은 의도를 지녔지만 다른 방식으로 표현되는 질문 예시를 많이 입력해야 합니다.
* 질문 예시 작성 개수는 질문 유형당 10~15개입니다.
* 반복적인 패턴의 표현은 피하고 다양한 변형을 주어 질문 예시를 작성합니다. 이 부분에 대해서는 [사전 타입](#VariableDictionary)에서 다룹니다.
* 위 기준으로 질문 예시를 입력한 후 새로운 표현이 생기거나 인식이 잘 안 되는 표현을 발견할 때마다 질문 예시를 추가하는 것이 좋습니다.

앞서 언급했던 질문 유형 예 중에 질문 유형이 "가입 문의"에 해당하는 질문 예시를 작성해 보면 다음과 같을 수 있습니다.

```sh
회원 가입하고 싶어요.
회원 가입 방법을 알려 주세요.
회원 가입하려면 어떻게 해야 하나요?
멤버 등록하고 싶어요.
멤버 등록 방법을 알려 주세요.
멤버 등록하려면 어떻게 해야 하나요?
계정 생성하고 싶어요.
계정 생성 방법을 알려 주세요.
계정 생성하려면 어떻게 해야 하나요?
...
```

"가입 문의" 질문 유형에는 다양한 표현이 있을 수 있습니다. 위에 작성된 질문 예시는 표현은 다르지만 모두 같은 의미를 지니며, 같은 답변으로 대응할 수 있음을 파악할 수 있습니다. 이런 방법으로 "가입 문의"에 해당하는 질문 예시뿐만 아니라 다른 질문 유형에도 그에 맞는 질문 예시를 작성해야 합니다.

### 질문 유형별 답변 {#ResponsesForEachUtteranceType}

질문 유형을 정의했고 질문 예시까지 작성했다면 사용자에게 답변할 내용을 작성해야 합니다. 고객 센터 지원 도움말 형태의 서비스라면 사용자가 문의한 내용에 대한 정보나 가이드를, 말벗 서비스 형태라면 대화에 맞는 답변을 작성하면 됩니다.

답변이 발음 오류나 임의의 끊어 읽기 없이 자연스럽게 발음되려면 다음과 같은 규칙을 지켜야 합니다.

* 문법에 맞게 답변을 작성합니다.
* 문장을 작성할 때 조사를 포함해 간결하게 작성합니다. 조사를 포함하지 않은 문장은 부자연스럽게 읽힐 가능성이 높습니다.
* 띄어쓰기를 지키는 것이 좋습니다. 띄어쓰기를 지키지 않으면 발음 오류가 발생할 수도 있고 원하지 않는 부분에서 답변이 부자연스럽게 끊어져 읽힐 수도 있습니다.
* 문장 부호를 적절히 쓰는 것이 좋습니다.
* 숫자, 영어, 기호 표현은 발음을 옮겨 적은 음차 표현으로 작성합니다. 다음은 음차 표현으로 답변을 작성하는 예입니다.
  - 2080: "이천팔십" 또는 "이공팔공"
  - 3M: "쓰리엠", "삼 미터" 또는 "삼 메가"
  - 1/3: "일월 삼일" 또는 "삼분의 일"
* 약어 또한 풀어서 한글로 쓰는 것이 좋습니다. 예를 들면 "TG"와 같은 약어는 "톨게이트"로 풀어 쓰는 것이 좋습니다.
* 여러 단계에 걸쳐서 안내하는 답변을 작성하려면 답변하는 문장 앞에 "첫 번째", "그 다음에는", "마지막으로" 등과 같은 표현을 넣는 것이 좋습니다.

예를 들면 "가입 문의" 질문 유형에 대해 다음과 같은 답변을 작성할 수 있습니다.

```sh
회원가입은 네이버 홈페이지에서 하실 수 있으며, 로그인 영역 하단의 회원 가입 링크를 통해 진행하실 수 있습니다.
```

일반적으로 고객 센터 지원 도움말 형태의 서비스는 하나의 질문 유형에 하나의 답변이 작성되나 말벗 서비스의 경우에는 하나의 질문 유형에 다양한 답변을 준비해 놓을 수 있습니다. 물론, 하나의 질문 유형에 답변을 여러 개 등록할 수 있지만 실제 대화 시 하나의 답변만 사용자에게 전달됩니다. 예를 들어 말벗 서비스에서 사용자의 질문 중 '챗봇 나이 요청' 질문 유형에 대한 답변으로 다음과 같은 답변을 준비해 둘 수 있습니다.

```sh
나이가 중요한가요?
맞춰보세요.
비밀이에요.
```

등록된 복수의 답변 중에 어떤 답변을 응답으로 줄지는 다음과 같이 두 가지 방법으로 결정할 수 있습니다.

* 여러 답변 중 특정 답변을 전달하도록 지정할 수 있습니다.
* 여러 답변 중 불규칙한 방식으로 임의의 답변을 사용자에게 전달하도록 지정할 수 있습니다.

질문 유형별 답변까지 작성하고 나면 챗봇 질문을 다음과 같이 표 형태로 나타내서 정리할 수 있습니다.

|서비스 형태|질문 유형 분류|질문 예시|답변|
|---|---|-----|-----|
|고객 센터 지원 도움말|가입 문의|회원 가입하고 싶어요.<br/>멤버 등록 방법을 알려주세요.<br/>계정 생성하려면 어떻게 해야 하나요?|회원가입은 네이버R 홈페이지에서 하실 수 있으며, 로그인 영역 하단의 회원 가입 링크를 통해 진행하실 수 있습니다.|
|말벗 서비스|챗봇 나이 요청|몇 살이야?<br/>나이가 어떻게 돼?|나이가 중요한가요?<br/>맞춰보세요.<br/>비밀이에요.|


### 사전 타입 {#VariableDictionary}

질문 예시를 작성하다 보면 예시가 특정 패턴으로 구성되는 경우가 많습니다. 주어나 목적어와 같이 명사 형태의 일부 요소가 다양한 값으로 표현될 수 있지만 그 의미는 바뀌지 않습니다. 예를 들어 "[질문 예시](#UtteranceExamples)"에서 언급한 "회원 가입", "멤버 등록", "계정 생성"이라는 표현은 같은 의미를 지니는 요소로서 같은 패턴의 문장에서 어떤 값이 들어와도 문장의 의미가 바뀌지 않습니다.

 

![](/Design/Resources/Images/Clova_Chatbot_Extension_Dictionary_for_Variable.png)

Extension의 Interaction 모델에서는 이런 부분을 '변수'라고 부르고, 변수 자리에 들어올 수 있는 값의 목록을 '변수 사전'이라고 부릅니다. 변수 사전을 Clova Chatbot에서는 '사전 타입'이라고 표현합니다.

앞서 나열한 질문 예시는 변수를 이용해서 표현하면 다음과 같은 패턴으로 표현할 수 있습니다.

{% raw %}
```
{{변수}}하고 싶어요.
{{변수}} 방법을 알려 주세요.
{{변수}}하려면 어떻게 해야 하나요?
```
{% endraw %}

일반적으로 사전 타입은 유의어나 동의어의 집합이 될 수도 있습니다. 그뿐만 아니라 상위 분류, 개념이 같은 용어나 특정 속성이 같은 용어의 집합일 수도 있습니다. 예를 들면 NAVER 카페, NAVER 블로그, NAVER 뮤직, NAVER 메일 등의 서비스 용어는 유의어나 동의어라고 할 수는 없으나 네이버 계정으로 서비스를 제공한다는 공통된 속성이 있습니다. 따라서 각 서비스의 회원 가입 문의는 네이버 계정 생성과 같은 문의이므로 같은 사전 타입을 사용해 표현할 수 있습니다.

{% raw %}
```
NAVER 메일 가입 방법 알려주세요.
NAVER 카페 가입 방법 알려주세요.
NAVER 블로그 가입 방법 알려주세요.
NAVER 뮤직 가입 방법 알려주세요.
...
```
{% endraw %}

따라서 위 발화 예시는 "NAVER 서비스"라는 사전 타입을 만들고 이 사전을 참조하는 변수로 반복 없이 한 번에 표현할 수 있습니다.

{% raw %}
```
{{NAVER 서비스}} 가입 방법 알려주세요.

// 변수 사전 선언
NAVER 서비스=NAVER 메일, NAVER 카페, NAVER 블로그, NAVER 뮤직
...
```
{% endraw %}

## 유의 사항 {#Precautions}

Clova Chatbot을 설계할 때 다음과 같은 사회적인 또는 법적인 문제가 있는지 미리 파악해 문제가 발생하지 않도록 반드시 주의해야 합니다. Clova Chatbot을 설계하는 단계뿐만 아니라 Clova Chatbot을 Clova에 등록하거나 배포할 때에도 아래 사항을 한 번 더 검토할 것을 권고합니다.

* 저작권 보호 의무에 대한 위반 사항이 있는지 검토
* 개인정보 보호 의무에 대한 위반 사항이 있는지 검토
* 서비스 연결이나 데이터 제공이 일회적이지 않고 지속적일 수 있는지 검토
* 아동 또는 일반 사용자에게 해를 줄 수 있는 선정적인 콘텐츠가 있는지 검토

## 지속적인 업데이트 {#ContinuousUpdate}

Clova Chatbot을 개발할 때 입력한 질문 유형의 질문 예시에 맞게 사용자가 질문하지 않을 수 있습니다. 사용자가 실제 Clova를 사용하는 방식에 차이가 있을 수 있고, 입력한 질문 유형이 사용자의 모든 사용 패턴을 대변했다고 할 수 없습니다. 즉, 사용자는 예상과 다르게 Clova Chatbot을 사용하려 할 수 있습니다. 따라서 Clova Chatbot을 배포한 이후에도 Clova Chatbot의 질문 유형이나 질문 예시를 지속적으로 개선하는 활동을 해야 사용자의 만족도를 향상시킬 수 있습니다.

Clova Chatbot을 등록한 후 Clova 플랫폼이 제공하는 통계 데이터나 유입된 사용자 [대화 기록](/DevConsole/Guides/CEK/Update_Chatbot_Extension.md#UpdateUsingUtteranceHistor)을 분석해 꾸준히 Clova Chatbot을 업데이트해야 합니다.
