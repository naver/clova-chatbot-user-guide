# Clova Chatbot 디자인 가이드라인

Clova Chatbot은 Clova를 통해 사용자에게 고객 지원 도움말이나 간단한 대화 서비스를 제공할 수 있습니다. 사용자에게 편리하고 유용한 서비스를 제공하기 위해 Clova Chatbot을 설계할 때 따르기를 권장하는 가이드라인을 간단한 예와 함께 설명합니다. 이 글에서 설명하는 내용은 Clova Chatbot 설계의 기본 권장 사항입니다.

* [시작하기 전 고려사항](#Considerations)
* [챗봇 대화 모델 정의](#DefineDialogueModel)
* [유의 사항](#Precautions)
* [지속적인 업데이트](#ContinuousUpdate)

## 시작하기 전 고려사항 {#Considerations}

시작하기 전 다음과 같은 사항을 고려해야 합니다.

### 서비스 목적 정의
챗봇 서비스는 다양하게 구성할 수 있지만 서비스 목적에 맞게 제작해야 효과적입니다. 예를 들어 다음과 같은 목적을 설정할 수 있습니다.

* 기존 채널(예: 고객센터 콜, 이메일 상담, 채팅 상담 등) 외에 메신저 등 하나의 채널을 더 추가
* 기존 채널로 인입되는 것을 줄이고(리소스를 줄이고) 챗봇 상담으로 대체
* 기존 채널 리소스는 그대로 활용하고 이를 세일즈/마케팅 리소스로 전환

### 답변 범위 설정

챗봇의 유형은 크게 두 가지로 나눌 수 있으며, 유형에 따라 다음과 같이 답변의 범위를 고려해야 합니다.

* 유형 1: 사용자의 질문에 대해 폐쇄형 답변만 하는 챗봇
  * FAQ 등 CS에 대해서만 답변 제공
  * CS 외에 해당 서비스에 관한 주제 전체에 대해서도 답변 제공
* 유형 2: 사용자의 질문에 대해 개방형 답변도 하는 챗봇
  * 정보 조회가 필요한 답변은 어떤 유형이며 몇 개의 서비스를 제공할 것인지 확인(예: 배송 정보 조회)
  * 가입/변경 등 Task 처리가 필요한 답변은 어떤 유형이며 몇 개의 서비스를 제공할 것인지 확인(예: AS기사 방문 예약 신청)

두 가지의 유형을 함께 사용하는 것도 가능합니다. 다만, 서비스 목적에 따라 선택하되 사용자의 입장에서 바라는 바와 챗봇 서비스가 제공할 수 있는 한계를 잘 파악해야 합니다.

### 대화 데이터셋 구축

챗봇 엔진을 선택하신 후 그 엔진에 맞추어 대화 구축을 진행하는데 이때 챗봇에서 제공할 답변 범위에 맞는 데이터가 필요합니다.

<ul>
  <li>기존 데이터를 정제해서 활용해야 합니다.<br />서비스 목적에 따라 활용할 수 없는 데이터가 있으므로 초기에 잘 선택해야 학습 데이터를 구축하는데 걸리는 시간을 단축할 수 있습니다. 가장 시간이 많이 걸리고 주의를 기울여야 하는 작업은 데이터를 정제하는 작업입니다. 데이터가 정제되지 않으면, 챗봇의 답변은 신뢰도가 낮아지며 기업의 이미지도 함께 영향을 받을 수 있습니다. 활용할 수 있는 기존 데이터로는 다음과 같은 것들이 있습니다.
    <ul>
      <li>홈페이지의 ‘자주 찾는 질문’, ‘1:1 문의하기’ 등</li>
      <li>채팅 상담 쿼리</li>
      <li>고객센터 인입콜의 문의 유형, 상담 코드 등</li>
      <li>고객센터 녹취 STT 데이터</li>
    </ul>
  </li>
  <li>누가 시나리오를 개발할 것인지 결정이 필요합니다.<br />시나리오 개발에는 서비스 도메인에 대해 잘 알고 있는 전문가가 꼭 필요합니다. 사용자가 무엇을 많이 물어보는지에 대한 인사이트가 필요하기 때문에 해당 의문에 대해 가장 잘 답할 수 있는 실제 업무 담당자(고객 상담사, 신규 상품 출시 대응을 위한 교육자료 작성자 등)가 시나리오를 개발하는 것이 가장 효율적입니다.</li>
</ul>

### 마지막으로
챗봇 서비스는 지속적으로 사용자 발화에 대한 재학습이 필수적이며, 신규 상품의 출시 등 고객 비스니스에 변화가 있을 경우 항상 최신의 정보를 반영해야 합니다. 따라서 지속적인 대화 데이터셋 유지 보수 및 서비스 배포 관리가 필요합니다.

## 챗봇 대화 모델 정의 {#DefineDialogueModel}

Clova Chatbot의 대화 모델은 사용자의 질문에 대한 답변하는 대화를 정의한 것입니다. Clova Chatbot에서 대화 모델을 정의하는 것은 서비스에 필요한 다양한 대화를 정의하고 이런 대화를 모아 대화 목록을 만드는 것과 같습니다.

Clova Chatbot의 챗봇 대화 모델을 정의할 때 다음을 수행해야 합니다.

* [대화 이름 정의](#DefineDialogueName)
* [대화 유형 정의](#DefineDialogueType)
* [질문 작성](#MakeQueries)
* [답변 작성](#MakeResponsesForEachQuery)
* [엔티티 정의](#DefineEntity)

### 대화 이름 정의 {#DefineDialogueName}

챗봇을 통해 다양한 문의가 들어올 수 있으며, 이에 대응하기 위해 다양한 대화가 필요할 수 있습니다. 대화 목록에서 이들을 구분하려면 우선 각 대화마다 이름을 지정해야 합니다. 대화 이름은 대화를 구분하는 식별자로 사용됩니다. 예를 들어 운영하는 쇼핑몰의 문의에 관한 대화라면 '쇼핑몰 문의'라는 식의 이름으로 정의할 수 있을 것입니다.  이름으로 구분되는 대화는 사용자의 어떤 [질문](#MakeQueries)에 어떤 [답변](#MakeResponsesForEachQuery)을 할 것인지 나누는 논리적 단위가 됩니다. 즉, 대화마다 사용자에게 같은 답변을 정의해야 하기 때문에 비슷한 답변이 가능한 질문을 묶어서 하나의 대화로 정의해야 합니다.

예를 들어 쇼핑몰 서비스의 문의는 다음과 같은 분류가 있을 수 있습니다. 각 항목은 별개의 대화로 구분될 수 있고 이를 구분하기 위해 "가입 문의"와 같이 이름을 붙일 수 있습니다.

```sh
* 회원 관련 문의
  * 가입 문의
  * 계정 찾기 문의
  * 회원 정보 변경 문의
  * 탈퇴 문의
* 결제 문의
  * 상품 구입 방법
  * 쿠폰 사용/적립금 사용 방법
  * 주문 정보 확인 방법
  * 상품 환불 방법
* 배송 문의
  * 배송 조회 방법
  * 배송지 변경 방법
  * 반품 방법
* 기타 문의
  * 회사 정보 문의
...
```

### 대화 유형 정의 {#DefineDialogueType}

대화를 작성할 때 대화를 구분하기 위해 [대화 이름](#DefineDialogueName)을 지어 대화를 구분할 수도 있지만 대화 유형을 지정할 수도 있습니다. 대화 유형은 태그와 같은 도구로 특정 대화에 관련 있는 개념이나 속성을 부여할 수 있습니다.

예를 들면, "가입 문의" 대화는 '계정', '신규 사용자'와 같은 대화 유형 정보를 태그와 같은 방식으로 붙일 수 있습니다.

### 질문 작성 {#MakeQueries}

Clova Chatbot이 대응할 [대화](#DefineDialogueName)을 정의했다면 각 대화별로 어떤 사용자 요청이 들어올지 질문을 작성해야 합니다. 하나의 대화에는 '같은 답변을 가질 수 있는 모든 질문'을 작성하면 됩니다.

질문을 작성할 때는 다음을 고려해 작성할 것을 권장합니다.

* 문어체보다는 구어체로 작성합니다.
* 같은 의도를 지녔지만 다른 방식으로 표현되는 질문을 많이 입력해야 합니다.
* 질문 작성 개수는 대화당 10~15개 이상을 권장합니다.
* 반복적인 패턴의 표현은 피하고 다양한 변형을 주어 질문을 작성합니다. 이 부분에 대해서는 [엔티티 정의](#DefineEntity)에서 다룹니다.
* 위 기준으로 대화 예시를 입력한 후 새로운 표현이 생기거나 인식이 잘 안 되는 표현을 발견할 때마다 질문을 추가하는 것이 좋습니다.

앞서 언급했던 질문 중에 대화 이름이 "가입 문의"에 해당하는 질문을 작성해 보면 다음과 같을 수 있습니다.

```sh
회원 가입하고 싶어요.
회원 가입 방법을 알려 주세요.
회원 가입하려면 어떻게 해야 하나요?
멤버 등록하고 싶어요.
멤버 등록 방법을 알려 주세요.
멤버 등록하려면 어떻게 해야 하나요?
계정 생성하고 싶어요.
계정 생성 방법을 알려 주세요.
계정 생성하려면 어떻게 해야 하나요?
...
```

"가입 문의" 대화에는 다양한 표현이 있을 수 있습니다. 위에 작성된 대화 예시는 표현은 다르지만 모두 같은 의미를 지니며, 같은 답변으로 대응할 수 있음을 파악할 수 있습니다. 이런 방법으로 "가입 문의"에 해당하는 대화 예시뿐만 아니라 다른 대화에도 그에 맞는 대화 예시를 작성해야 합니다.

### 답변 작성 {#MakeResponsesForEachQuery}

[질문을 작성](MakeQueries)했다면 사용자에게 답변할 내용을 작성해야 합니다. 고객 센터 지원 도움말 형태의 서비스라면 사용자가 문의한 내용에 대한 정보나 가이드를, 말벗 서비스 형태라면 대화에 맞는 답변을 작성하면 됩니다.

답변이 발음 오류나 임의의 끊어 읽기 없이 자연스럽게 발음되려면 다음과 같은 규칙을 지켜야 합니다.

* 문법에 맞게 답변을 작성합니다.
* 문장을 작성할 때 조사를 포함해 간결하게 작성합니다. 조사를 포함하지 않은 문장은 부자연스럽게 읽힐 가능성이 높습니다.
* 띄어쓰기를 지키는 것이 좋습니다. 띄어쓰기를 지키지 않으면 발음 오류가 발생할 수도 있고 원하지 않는 부분에서 답변이 부자연스럽게 끊어져 읽힐 수도 있습니다.
* 문장 부호를 적절히 쓰는 것이 좋습니다.
* 숫자, 영어, 기호 표현은 발음을 옮겨 적은 음차 표현으로 작성합니다. 다음은 음차 표현으로 답변을 작성하는 예입니다.
  - 2080: "이천팔십" 또는 "이공팔공"
  - 3M: "쓰리엠", "삼 미터" 또는 "삼 메가"
  - 1/3: "일월 삼일" 또는 "삼분의 일"
* 약어 또한 풀어서 한글로 쓰는 것이 좋습니다. 예를 들면 "TG"와 같은 약어는 "톨게이트"로 풀어 쓰는 것이 좋습니다.
* 여러 단계에 걸쳐서 안내하는 답변을 작성하려면 답변하는 문장 앞에 "첫 번째", "그 다음에는", "마지막으로" 등과 같은 표현을 넣는 것이 좋습니다.

예를 들면 "가입 문의" 대화에 대해 다음과 같은 답변을 작성할 수 있습니다.

```sh
회원가입은 네이버 홈페이지에서 하실 수 있으며, 로그인 영역 하단의 회원 가입 링크를 통해 진행하실 수 있습니다.
```

일반적으로 고객 센터 지원 도움말 형태의 서비스는 하나의 질문에 하나의 답변이 작성되나 말벗 서비스의 경우에는 하나의 질문에 다양한 답변을 준비해 놓을 수 있습니다. 물론, 하나의 질문에 답변을 여러 개 등록할 수 있지만 실제 대화 시 하나의 답변만 사용자에게 전달됩니다. 예를 들어 말벗 서비스에서 사용자의 대화 중 '회사 정보 문의' 대화에 대한 답변으로 다음과 같은 답변을 준비해 둘 수 있습니다.

```sh
참 좋은 회사에요.
우리 회사는 고객님을 위해 항상 노력하고 있어요.
```

등록된 복수의 답변 중에 어떤 답변을 응답으로 줄지는 다음과 같이 두 가지 방법으로 결정할 수 있습니다.

* 여러 답변 중 특정 답변을 전달하도록 지정할 수 있습니다.
* 여러 답변 중 불규칙한 방식으로 임의의 답변을 사용자에게 전달하도록 지정할 수 있습니다.

질문별 답변까지 작성하고 나면 챗봇 대화를 다음과 같이 표 형태로 나타내서 정리할 수 있습니다.

| 서비스 형태 | 대화 이름 | 대화 예시              | 답변                 |
|----------|----------|----------------------|----------------------|
| 고객 센터 지원 도움말 | 가입 문의     | 회원 가입하고 싶어요.<br/>멤버 등록 방법을 알려주세요.<br/>계정 생성하려면 어떻게 해야 하나요? | 회원가입은 네이버 홈페이지에서 하실 수 있으며, 로그인 영역 하단의 회원 가입 링크를 통해 진행하실 수 있습니다. |
| 고객 센터 지원 도움말 | 회사 정보 문의 | 어떤 회사야?<br/>회사 뭐하는 곳이야? | 참 좋은 회사에요.<br/>우리 회사는 고객님을 위해 항상 노력하고 있어요. |


### 엔티티 정의 {#DefineEntity}

질문을 작성하다 보면 대화가 특정 패턴으로 구성되는 경우가 많습니다. 주어나 목적어와 같이 명사 형태의 일부 요소가 다양한 값으로 표현될 수 있지만 그 의미는 바뀌지 않습니다. 예를 들어 [질문 작성](#MakeQueries)에서 언급한 "회원 가입", "멤버 등록", "계정 생성"이라는 표현은 같은 의미를 지니는 요소로서 같은 패턴의 문장에서 어떤 값이 들어와도 문장의 의미가 바뀌지 않습니다.

![](/Design/Resources/Images/Clova_Chatbot_Extension_Dictionary_for_Variable.png)

이런 부분을 엔티티(entity)라고 부르고, 엔티티 자리에 들어올 수 있는 값을 등록해야 합니다.

앞서 나열한 질문은 엔티티를 이용해서 표현하면 다음과 같은 패턴으로 표현할 수 있습니다.

{% raw %}
```
{{엔티티}}하고 싶어요.
{{엔티티}} 방법을 알려 주세요.
{{엔티티}}하려면 어떻게 해야 하나요?
```
{% endraw %}

일반적으로 엔티티는 유의어나 동의어의 집합이 될 수도 있습니다. 그뿐만 아니라 상위 분류, 개념이 같은 용어나 특정 속성이 같은 용어의 집합일 수도 있습니다. 예를 들면 NAVER 카페, NAVER 블로그, NAVER 뮤직, NAVER 메일 등의 서비스 용어는 유의어나 동의어라고 할 수는 없으나 네이버 계정으로 서비스를 제공한다는 공통된 속성이 있습니다. 따라서 각 서비스의 회원 가입 문의는 네이버 계정 생성과 같은 문의이므로 같은 엔티티를 사용해 표현할 수 있습니다.

{% raw %}
```
NAVER 메일 가입 방법 알려주세요.
NAVER 카페 가입 방법 알려주세요.
NAVER 블로그 가입 방법 알려주세요.
NAVER 뮤직 가입 방법 알려주세요.
...
```
{% endraw %}

따라서 "NAVER 서비스"라는 엔티티를 만들고 이것을 참조하도록 엔티티를 사용하여 위 발화 예시를 반복 없이 한 번에 표현할 수 있습니다.

{% raw %}
```
{{NAVER 서비스}} 가입 방법 알려주세요.

// 엔티티 선언
NAVER 서비스=NAVER 메일, NAVER 카페, NAVER 블로그, NAVER 뮤직
...
```
{% endraw %}

## 유의 사항 {#Precautions}

Clova Chatbot을 설계할 때 다음과 같은 사회적인 또는 법적인 문제가 있는지 미리 파악해 문제가 발생하지 않도록 반드시 주의해야 합니다. Clova Chatbot을 설계하는 단계뿐만 아니라 Clova Chatbot을 Clova에 등록하거나 배포할 때에도 아래 사항을 한 번 더 검토할 것을 권고합니다.

* 저작권 보호 의무에 대한 위반 사항이 있는지 검토
* 개인정보 보호 의무에 대한 위반 사항이 있는지 검토
* 서비스 연결이나 데이터 제공이 일회적이지 않고 지속적일 수 있는지 검토
* 아동 또는 일반 사용자에게 해를 줄 수 있는 선정적인 콘텐츠가 있는지 검토

## 지속적인 업데이트 {#ContinuousUpdate}

Clova Chatbot을 개발할 때 입력한 대화 유형의 대화 예시에 맞게 사용자가 발화하지 않을 수 있습니다. 사용자가 실제 Clova를 사용하는 방식에 차이가 있을 수 있고, 입력한 대화 유형이 사용자의 모든 사용 패턴을 대변했다고 할 수 없습니다. 즉, 사용자는 예상과 다르게 Clova Chatbot을 사용하려 할 수 있습니다. 따라서 Clova Chatbot을 배포한 이후에도 Clova Chatbot의 대화 유형이나 대화 예시를 지속적으로 개선하는 활동을 해야 사용자의 만족도를 향상시킬 수 있습니다.

Clova Chatbot을 등록한 후 Clova 플랫폼이 제공하는 통계 데이터(추후 제공 예정)나 유입된 사용자 대화 기록을 분석해 꾸준히 Clova Chatbot을 업데이트해야 합니다.
